# 6.2. Par√°metros f√≠sicos

---

## üî∑ Tablas Principales

### `plan_entrega`

#### Configuraci√≥n de Almacenamiento

| Par√°metro                         | Valor                | Justificaci√≥n                   |
|-----------------------------------|----------------------|---------------------------------|
| Tama√±o de bloque (DB_BLOCK_SIZE)  | 8 KB                 | Optimo para registros medianos  |
| Tama√±o de extent inicial          | 64 KB (8 bloques)    | Para crecimiento controlado de la tabla    |
| Espacio libre reservado (PCTFREE) | 10%                  | Para reducir necesidad de migraci√≥n        |

#### Estructura del Registro y Tama√±o L√≥gico:

| Atributo         | Tipo de Dato          | Tama√±o (Bytes)    | Notas                     |
|------------------|-----------------------|-------------------|---------------------------|
| id_plan          | UUID                  | 16                | PK                        | 
| id_usuario	   | UUID	               | 16                | FK                        |
| fecha_entrega	   | TIMESTAMPTZ       	   | 8                 | -                         |
| estado           | VARCHAR(15)           | 15                | -                         |
| fecha_plan	   | TIMESTAMPTZ  	       | 8                 | -                         |

#### Tama√±o Total - F√≥rmulas

- Espacio Libre por Bloque = (Tama√±o de Bloque - Sobrecarga de Bloque) * Factor = (8 * 1024 - 107) * (1-10%) = 7276,5 bytes por bloque
- Cantidad de Filas por Bloque = 7276,5 / 63 = 115.5 = 116 filas por bloque
- Cantidad de Bloques = 19,636 / 116 =  169.27 = 170 Bloques
- Tama√±o Total = Cantidad de Bloques * Tama√±o de Bloque = 170 * 8 * 1024 = 1,392,640 bytes = 1,360 Kb = 1.33 Mb

### `ruta`

#### Configuraci√≥n de Almacenamiento

| Par√°metro                         | Valor                | Justificaci√≥n                   |
|-----------------------------------|----------------------|---------------------------------|
| Tama√±o de bloque (DB_BLOCK_SIZE)  | 8 KB                 | Optimo para registros medianos  |
| Tama√±o de extent inicial          | 64 KB (8 bloques)    | Para tablas con crecimiento constante      |
| Espacio libre reservado (PCTFREE) | 10%                  | Para reducir necesidad de migraci√≥n        |

#### Estructura del Registro y Tama√±o L√≥gico:

| Atributo        | Tipo de Dato   | Tama√±o (bytes) | Notas                   |
|------------------|---------------|----------------|-------------------------|
| id_ruta          | UUID          | 16             | Identificador principal.|
| id_plan          | UUID          | 16             | FK		              |
| fecha_hora_salida      | TIMESTAMPTZ   | 8              | -                       |
| fecha_hora_regreso     | TIMESTAMPTZ   | 8              | -                       |

#### Tama√±o Total - F√≥rmulas

- Espacio Libre por Bloque = (8 * 1024 - 107) * (1-10%) = 7276,5 bytes por bloque
- Cantidad de Filas por Bloque = 7276,5 / 48 = 151.59 = 152 filas por bloque
- Cantidad de Bloques = 54,000 / 152 =  355.26 = 356 Bloques
- Tama√±o Total = 356 * 8 * 1024 = 2,916,352 bytes = 2,848 Kb = 2.78 Mb

### `direccion_plan`

#### Configuraci√≥n de Almacenamiento

| Par√°metro                         | Valor                | Justificaci√≥n                   |
|-----------------------------------|----------------------|---------------------------------|
| Tama√±o de bloque (DB_BLOCK_SIZE)  | 8 KB                 | Valor por defecto en PostgreSQL compilado  |
| Tama√±o de extent inicial          | 64 KB (8 bloques)    | Para tablas con crecimiento constante      |
| Espacio libre reservado (PCTFREE) | 10%                  | Para reducir necesidad de migraci√≥n        |

#### Estructura del Registro y Tama√±o L√≥gico:

| Atributo         | Tipo de Dato | Tama√±o (bytes) | Notas                   |
|------------------|--------------|----------------|-------------------------|
| id_dir_plan      | UUID         | 16             | Identificador fijo      |
| id_ruta          | UUID         | 16             | FK                      |
| cod_orden        | UUID         | 16             | FK                      |
| posicion_dir     | NUMERIC(5)   | 5              | -                       |
| latitud_dir      | DOUBLE PRECISION| 8           | -                       |
| longitud_dir     | DOUBLE PRECISION| 8           | -                       |

#### Tama√±o Total - F√≥rmulas

- Espacio Libre por Bloque = (8 * 1024 - 107) * (1-10%) = 7276.5 bytes por bloque
- Cantidad de Filas por Bloque = (7276.5) / 69 = 105.45 = 106 filas por bloque
- Cantidad de Bloques = 479,260 / 106 =  4,521.32 = 4,522 Bloques
- Tama√±o Total = 4,522 * 8 * 1,024 = 37,044,224 bytes = 36,176 Kb = 35.33 Mb

### `Evento_Entrega`

#### Configuraci√≥n de Almacenamiento

| Par√°metro                         | Valor                | Justificaci√≥n                   |
|-----------------------------------|----------------------|---------------------------------|
| Tama√±o de bloque (DB_BLOCK_SIZE)  | 8 KB                 | Optimo para registros medianos  |
| Tama√±o de extent inicial          | 64 KB (8 bloques)    | Para tablas con crecimiento constante      |
| Espacio libre reservado (PCTFREE) | 10%                  | Para reducir necesidad de migraci√≥n        |

#### Estructura del Registro y Tama√±o L√≥gico:

| Atributo         | Tipo de Dato          | Tama√±o (Bytes)    | Notas                     |
|------------------|-----------------------|-------------------|---------------------------|
| id_entrega       | UUID                 | 16                | UUID                      | 
| id_orden         | UUID      	       | 16                | FK                        |
| id_conductor     | UUID      	       | 16                | FK                        |
| fecha_entrega    | TIMESTAMPTZ	       | 8                | -                         |
| estado_entrega   | VARCHAR(20)	       | 21                | -                         |
| firma_cliente    | VARCHAR(255)	       | 259               | URL de S3 para firma.                   |
| evidencia        | VARCHAR(255)	       | 259               | URL de S3 para firma.                   |
| id_reclamo       | UUID       	       | 16                | FK opcional a Gesti√≥n de Reclamos       |
| observaciones    | VARCHAR(200)	       | 204               | Campo opcional de haber reclamo         |
| Overhead de fila | -	                   | 23                | Cabecera de fila PostgreSQL       |
| Total por registro | -	               | 838               | Suma de columnas + Overhead   |

#### Tama√±o Total - F√≥rmulas

- Espacio Libre por Bloque = (Tama√±o de Bloque - Sobrecarga de Bloque) * Factor = (8 * 1024 - 24) * (0.9) = 7351,2 bytes por bloque
- Cantidad de Filas por Bloque = (Espacio Libre por Bloque) / (Tama√±o de Fila + Sobrecarga de Fila) = (7351,2) / (815 + 23) = 8,77 = 9 filas por bloque
- Cantidad de Bloques = Cantidad Total de Filas / Cantidad de Filas por Bloque = 52,416 / 9 = 5824 Bloques
- Tama√±o Total = Cantidad de Bloques * Tama√±o de Bloque = 5824 * 8 * 1024 = 45,50 Mb

---
### `Reclamo`

#### Configuraci√≥n de Almacenamiento

| Par√°metro                         | Valor                | Justificaci√≥n                                   |
|----------------------------------|----------------------|-------------------------------------------------|
| Tama√±o de bloque (`block_size`)  | 8 KB (8192 bytes)    | Valor por defecto en PostgreSQL compilado       |
| Tama√±o de extent inicial         | 64 KB (8 bloques)    | Buen punto de partida para crecimiento moderado |
| Espacio libre reservado (`fillfactor`) | 90% (10% libre) | Aumenta eficiencia de actualizaciones            |

#### Estructura del Registro y Tama√±o L√≥gico:

| Atributo         | Tipo de Dato    | Tama√±o (Bytes) | Notas                                    |
|------------------|-----------------|----------------|------------------------------------------|
| id_reclamo       | UUID            | 16             | Identificador principal                  |
| id_entrega       | UUID            | 16             | FK a entrega                             |
| fecha_reclamo    | TIMESTAMP       | 8              | Fecha y hora del reclamo                 |
| tipo_reclamo     | VARCHAR(50)     | 52             | 50 + 2 bytes (longitud + null marker)    |
| descripcion      | VARCHAR(500)    | 502            | 500 + 2 bytes                            |
| estado           | VARCHAR(20)     | 22             | 20 + 2 bytes                             |
| evidencia_url    | VARCHAR(255)    | 257            | 255 + 2 bytes (URL en S3)                |
| Overhead por fila| -               | 23             | Cabecera interna de PostgreSQL           |
| Padding estimado | -           | 4              | Alineamiento para m√∫ltiplos de 8         |
| **Total por registro** | -         | **900 bytes**  | Suma de todos los campos                 |

#### Tama√±o Total - F√≥rmulas

- Filas por bloque = (8192 * 90%) / 900 = 7372.8 / 900 ‚âà 8 filas por bloque

- Cantidad total de registros estimados = 629 reclamos (seg√∫n proyecci√≥n 2028)

- Cantidad de bloques = 629 / 8 = 78.62 ‚Üí se redondea a 79 bloques

- Tama√±o total estimado = 79 bloques * 8192 bytes = 646168 bytes ‚âà 631 KB

---