# 7.1. Creaci√≥n de Tablas

 
```sql

DROP TABLE IF EXISTS EventoEntrega CASCADE;
DROP TABLE IF EXISTS GestionReclamos CASCADE;
DROP TABLE IF EXISTS RecepcionOrdenes CASCADE;
DROP TABLE IF EXISTS Carga CASCADE;
DROP TABLE IF EXISTS Asignacion_transporte CASCADE;
DROP TABLE IF EXISTS Conductores CASCADE;
DROP TABLE IF EXISTS Vehiculo CASCADE;

CREATE TABLE Vehiculo (
    id_vehiculo UUID DEFAULT gen_random_uuid() PRIMARY KEY
);

CREATE TABLE Conductores (
    id_conductor UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    DNI UUID DEFAULT gen_random_uuid(),
    nombre_conductor VARCHAR(100) NOT NULL,
    telefono_conductor VARCHAR(9) NOT NULL,
    licencia_conductor VARCHAR(20) NOT NULL,
    estado_conductor BOOLEAN DEFAULT TRUE,
    vehiculo_asignado VARCHAR(20),
    fecha_registro TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Asignacion_transporte (
    id_asignacion UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    id_vehiculo UUID NOT NULL REFERENCES Vehiculo(id_vehiculo),
    id_conductor UUID NOT NULL REFERENCES Conductores(id_conductor)
);

CREATE TABLE Carga (
    id_carga UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    id_vehiculo UUID NOT NULL REFERENCES Vehiculo(id_vehiculo)
);

CREATE TABLE RecepcionOrdenes (
    id_orden UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    codigo_orden VARCHAR(20) NOT NULL UNIQUE,
    tipo_orden VARCHAR(10) CHECK (tipo_orden IN ('AVICOLA', 'CONSUMO', 'MIXTA')),
    fecha_creacion TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,
    prioridad SMALLINT CHECK (prioridad BETWEEN 1 AND 5),
    cliente_id UUID NOT NULL
);


CREATE TABLE GestionReclamos (
    id_reclamo UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    codigo_reclamo VARCHAR(20) NOT NULL UNIQUE,
    tipo_reclamo VARCHAR(30) NOT NULL,
    fecha_creacion TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,
    severidad SMALLINT CHECK (severidad BETWEEN 1 AND 3)
);


CREATE TABLE EventoEntrega (
    id_entrega UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    id_orden UUID NOT NULL REFERENCES RecepcionOrdenes(id_orden),
    id_conductor UUID NOT NULL REFERENCES Conductores(id_conductor),
    fecha_entrega TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    estado_entrega VARCHAR(20) NOT NULL CHECK (estado_entrega IN (
        'completada', 
        'fallida', 
        'con_reclamo',
        'reprogramada'
    )),
    firma_cliente VARCHAR(255),
    evidencia VARCHAR(255),
    id_reclamo UUID REFERENCES GestionReclamos(id_reclamo),
    observaciones VARCHAR(200)
    
);

```